# AES-128文件加密器 - 源码保护实现

## 概述
本项目实现了对Python源代码的保护，通过将源代码编译为字节码并在运行时加载，以防止源代码被直接查看和修改。同时保留了程序的完整功能，包括多目录加密支持。

## 实现方法

### 1. 字节码编译保护
- 使用 `marshal` 模块将源代码编译为字节码
- 源文件内容被替换为最小化占位符
- 原始源文件备份保存在 backup 目录中

### 2. 运行时加载
- 编写启动器脚本 `run_encrypted.py` 从字节码文件加载模块
- 使用 `marshal.load()` 加载字节码
- 通过 `exec()` 执行字节码

### 3. 模块依赖处理
- 正确设置 `sys.modules` 以处理模块间的依赖关系
- 确保各模块可以相互导入
### 4. 多目录支持
- 加密功能支持用户选择任意目录保存加密文件
- 文件列表可显示不同目录的加密文件
- 保持所有功能完整性

## 文件结构

```
AESFileEncryptor/
├── src/
│   ├── backup/              # 源代码备份
│   │   ├── crypto_utils.py
│   │   ├── password_manager.py
│   │   └── main.py
│   ├── crypto_utils.pyc     # 加密的工具模块字节码
│   ├── password_manager.pyc # 加密的密码管理模块字节码
│   ├── main.pyc             # 加密的主模块字节码
│   ├── run_encrypted.py     # 加密版启动器
│   ├── launcher.py          # 启动器（备用）
│   ├── compile_src.py       # 编译脚本
│   └── create_executable.py # 打包脚本
└── ...
```

## 使用方法

### 加密源码
1. 运行 `compile_src.py` 将源码编译为字节码
2. 原文件被保护，内容替换为占位符
3. 字节码文件生成以 `.pyc` 为扩展名

### 运行加密程序
1. 使用 `run_encrypted.py` 启动程序
2. 启动器从字节码文件加载所有模块
3. 程序正常运行所有功能

### 创建可执行文件
1. 使用 `create_executable.py` 创建独立的可执行文件
2. 依赖 PyInstaller 工具

## 安全性说明

### 保护级别
- 防止直接查看源代码
- 防止简单修改源代码
- 需要高级技能才能逆向字节码

### 局限性
- 高级用户仍可能通过反编译工具恢复部分源码逻辑
- 字节码仍包含原始的变量名和逻辑结构
- 运行时内存中仍可能存在解密后的代码

## 功能完整性
- 所有原始功能完全保留
- 加密/解密功能正常
- 密码管理正常
- 文件查看功能正常
- 用户界面正常

## 备份和恢复
- 原始源代码保存在 `backup/` 目录中
- 如需恢复原始源码，可从备份目录复制
- 字节码文件可由原始源码重新生成

## 部署建议
- 将字节码文件和启动器文件部署到目标环境
- 不要部署 `backup/` 目录
- 确保目标环境有 Python 和必要依赖